<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIRA MALL | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ§Ø¬Ø±Ø§Øª</title>
<style>
:root{ --gold:#D4AF37; --dark:#0f1111; --white:#ffffff; --gray:#f0f2f5; }
body{margin:0; font-family:'Segoe UI', Tahoma, sans-serif; background:var(--gray); direction:rtl;}
header{background:var(--dark); color:var(--gold); padding:15px; text-align:center; border-bottom:4px solid var(--gold); box-shadow:0 4px 10px rgba(0,0,0,0.1);}

.container{max-width:650px; margin:30px auto; padding:20px; background:var(--white); border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.05);}
input, button, textarea{width:100%; padding:12px; margin:10px 0; border-radius:10px; border:1px solid #ddd; font-size:14px; box-sizing:border-box; outline:none;}
input:focus{border-color:var(--gold);}
button{background:var(--dark); color:var(--gold); border:2px solid var(--gold); font-weight:bold; cursor:pointer; transition:0.3s;}
button:hover{background:var(--gold); color:var(--dark);}

.hidden{display:none;}
.user-info{display:flex; justify-content:space-between; align-items:center; background:#f9f9f9; padding:10px 15px; border-radius:10px; margin-bottom:20px; border-right:4px solid var(--gold);}

table{width:100%; margin-top:20px; border-collapse:collapse; background:white; font-size:12px;}
table th, table td{padding:10px; border:1px solid #eee; text-align:center;}
table th{background:var(--gold); color:var(--dark);}

.btn-copy{background:#28a745; border:none; color:white; padding:8px; font-size:12px;}
.btn-logout{background:#dc3545; border:none; color:white; width:auto; padding:5px 15px; font-size:12px;}
</style>
</head>
<body>

<header>
  <h2>VIRA MALL | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø±Ø© âœ¨</h2>
</header>

<div class="container" id="authSection">
  <h2 style="text-align:center; color:var(--dark);">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ ÙÙŠØ±Ø§ Ù…ÙˆÙ„</h2>
  <p style="text-align:center; color:#666;">Ø³Ø¬Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
  <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØ§Ø¬Ø±Ø© (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)">
  <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <input type="text" id="storeName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ">
  <button id="loginBtn">ÙØªØ­ Ø§Ù„Ø­Ø³Ø§Ø¨ / ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="container hidden" id="adminSection">
  <div class="user-info">
      <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <strong id="displayUser"></strong> | Ù…ØªØ¬Ø±: <strong id="displayStore"></strong></span>
      <button class="btn-logout" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
  </div>

  <h3 style="text-align:center;">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
  <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
  <textarea id="productDesc" placeholder="ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„Ù…Ù†ØªØ¬" rows="2"></textarea>
  <div style="display:flex; gap:10px;">
      <input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± (SDG)">
      <input type="text" id="productSale" placeholder="Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
  </div>
  <input type="text" id="productImg" placeholder="Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± (Ù…ÙØµÙˆÙ„Ø© Ø¨Ù…Ø³Ø§ÙØ§Øª)">
  <input type="text" id="productWhatsApp" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø«Ø§Ù„: 2499...)">
  <button id="uploadBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© â•</button>

  <h3 style="text-align:center">Ù…Ù†ØªØ¬Ø§ØªÙƒ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù†Ø³Ø®</h3>
  <div style="overflow-x:auto;">
      <table id="productsTable">
        <thead>
          <tr>
            <th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ØµÙˆØ±</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
  </div>

  <button style="background:#0f1111; margin-top:20px;" id="copyAllBtn">Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¬Ø¯ÙˆÙ„ Ù‚ÙˆÙ‚Ù„ ğŸ“‹</button>
</div>

<script>
let uploadedProducts = [];

// âœ… Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
document.getElementById('loginBtn').addEventListener('click', () => {
  const username = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();
  const store = document.getElementById('storeName').value.trim();

  if(!username || !pass || !store) { alert('ÙŠØ§ ØºØ§Ù„ÙŠØ©ØŒ Ø£ÙƒÙ…Ù„ÙŠ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!'); return; }

  const userData = { username, store };
  localStorage.setItem('viraUser', JSON.stringify(userData));
  showAdmin();
});

function showAdmin() {
  const user = JSON.parse(localStorage.getItem('viraUser'));
  if(user) {
    document.getElementById('authSection').classList.add('hidden');
    document.getElementById('adminSection').classList.remove('hidden');
    document.getElementById('displayUser').innerText = user.username;
    document.getElementById('displayStore').innerText = user.store;
    document.getElementById('productStore').value = user.store; // ØªÙ„Ù‚Ø§Ø¦ÙŠ
  }
}

if(localStorage.getItem('viraUser')) { showAdmin(); }

function logout() {
  localStorage.removeItem('viraUser');
  location.reload();
}

// âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
document.getElementById('uploadBtn').addEventListener('click', () => {
  const name = document.getElementById('productName').value.trim();
  const desc = document.getElementById('productDesc').value.trim();
  const price = document.getElementById('productPrice').value.trim();
  const img = document.getElementById('productImg').value.trim();
  const wa = document.getElementById('productWhatsApp').value.trim();
  const sale = document.getElementById('productSale').value.trim();
  const store = JSON.parse(localStorage.getItem('viraUser')).store;

  if(!name || !price || !img || !wa) { alert('Ø¹Ø¨ÙŠ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„ØµÙˆØ±ØŒ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨)'); return; }

  const p = { name, desc, price, store, img, wa, sale };
  uploadedProducts.push(p);
  renderTable();

  // Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù†Ø§Øª
  ['productName','productDesc','productPrice','productImg','productSale'].forEach(id => document.getElementById(id).value = '');
});

function renderTable() {
  const tbody = document.querySelector('#productsTable tbody');
  tbody.innerHTML = uploadedProducts.map((p, idx) => `
    <tr>
      <td>${p.name}</td>
      <td>${p.price}</td>
      <td style="max-width:100px; overflow:hidden;">${p.img.substring(0,20)}...</td>
      <td><button class="btn-copy" onclick="copySingle(${idx})">Ù†Ø³Ø® ğŸ“‹</button></td>
    </tr>
  `).join('');
}

// âœ… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø¬Ø¯ÙˆÙ„ Ù‚ÙˆÙ‚Ù„ (Ø§Ø³Ù…ØŒ Ø³Ø¹Ø±ØŒ Ù…ØªØ¬Ø±ØŒ ØµÙˆØ±ØŒ ÙˆØ§ØªØ³Ø§Ø¨ØŒ ØªØ®ÙÙŠØ¶)
function copySingle(idx) {
  const p = uploadedProducts[idx];
  const row = `${p.name}\t${p.price}\t${p.store}\t${p.img}\t${p.wa}\t${p.sale}`;
  copyToClipboard(row);
}

document.getElementById('copyAllBtn').addEventListener('click', () => {
  if(uploadedProducts.length === 0) return alert('Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ©!');
  const allRows = uploadedProducts.map(p => `${p.name}\t${p.price}\t${p.store}\t${p.img}\t${p.wa}\t${p.sale}`).join('\n');
  copyToClipboard(allRows);
});

function copyToClipboard(text) {
  const el = document.createElement('textarea');
  el.value = text;
  document.body.appendChild(el);
  el.select();
  document.execCommand('copy');
  document.body.removeChild(el);
  alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®! Ø§Ø°Ù‡Ø¨ÙŠ Ù„Ø¬Ø¯ÙˆÙ„ Ù‚ÙˆÙ‚Ù„ ÙˆØ§Ø¹Ù…Ù„ÙŠ Ù„ØµÙ‚ (Paste) âœ¨');
}
</script>

</body>
</html>
