<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIRA MALL | ÙÙŠØ±Ø§ Ù…ÙˆÙ„</title>

    <meta name="description" content="VIRA MALL - Ù…Ù†ØµØ© Ø§Ù„ÙØ®Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­ØµØ±ÙŠØ©">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="icon" href="https://raw.githubusercontent.com/71-wq/71-wq.github.io/main/vira_logo.png">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        
        :root { --gold: #D4AF37; --black: #000000; --dark-grey: #111111; }

        body { 
            margin: 0; background: var(--black); color: white; 
            font-family: 'Cairo', sans-serif; padding-bottom: 100px;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„ÙØ®Ù… (Ø§Ù„Ù‚Ø¯ÙŠÙ…) */
        header { 
            padding: 25px; text-align: center; border-bottom: 1px solid #222;
            background: linear-gradient(to bottom, #111, #000);
        }
        .logo { width: 100px; filter: drop-shadow(0 0 8px var(--gold)); }

        /* Ø¨Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        .currency-bar {
            display: flex; gap: 10px; overflow-x: auto; padding: 15px;
            background: #080808; border-bottom: 1px solid #1a1a1a;
            scrollbar-width: none;
        }
        .currency-bar button {
            background: none; border: 1px solid var(--gold); color: var(--gold);
            padding: 6px 18px; border-radius: 20px; white-space: nowrap; cursor: pointer;
            font-size: 13px; transition: 0.3s;
        }
        .currency-bar button.active { background: var(--gold); color: black; font-weight: bold; }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ù†ÙØ³ Ø³ØªØ§ÙŠÙ„Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø§Ù„Ø¹Ø¬Ø¨Ùƒ) */
        .products-grid { padding: 15px; display: grid; grid-template-columns: 1fr; gap: 25px; }
        .product-card { 
            background: var(--dark-grey); border-radius: 20px; overflow: hidden;
            border: 1px solid #222; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .product-card img { width: 100%; height: auto; display: block; transition: 0.5s; }
        .product-card img:hover { transform: scale(1.02); }

        .details { padding: 20px; text-align: center; }
        .title { font-size: 20px; font-weight: bold; margin-bottom: 10px; }
        .price-box { font-size: 24px; color: var(--gold); font-weight: bold; margin: 10px 0; }
        .shipping { color: #00ff00; font-size: 12px; margin-bottom: 15px; }

        /* Ø²Ø± Ø§Ù„Ø·Ù„Ø¨ */
        .order-btn {
            background: var(--gold); color: black; padding: 15px; border-radius: 12px;
            text-decoration: none; display: block; font-weight: bold; font-size: 16px;
        }

        /* Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ§Ø¬Ø± (Ù†Ù‚Ù„Ù†Ø§Ù‡Ø§ ØªØ­Øª Ø¹Ø´Ø§Ù† Ù…Ø§ ØªØ®Ø±Ø¨ Ø§Ù„Ø´ÙƒÙ„) */
        .merchant-footer {
            margin: 30px 15px; padding: 25px; border-radius: 20px;
            background: linear-gradient(145deg, #111, #050505);
            border: 1px solid var(--gold); text-align: center;
        }
        .bank-info { 
            background: #000; padding: 15px; border-radius: 12px; 
            margin: 15px 0; border: 1px dashed var(--gold); color: var(--gold);
        }

        /* Ø§Ù„ÙÙˆØªØ± ÙˆØ§Ù„Ø³Ù„Ø© Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© */
        .cart-float {
            position: fixed; bottom: 30px; left: 20px; background: var(--gold);
            color: black; width: 65px; height: 65px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; box-shadow: 0 5px 20px rgba(212,175,55,0.4); z-index: 1000;
        }
        .count { position: absolute; top: 0; right: 0; background: red; color: white; border-radius: 50%; padding: 2px 8px; font-size: 12px; }

    </style>
</head>
<body>

<header>
    <img src="https://raw.githubusercontent.com/71-wq/71-wq.github.io/main/vira_logo.png" class="logo" alt="VIRA MALL">
    <div style="color:var(--gold); letter-spacing: 2px; margin-top:10px;">VIRA MALL</div>
</header>

<div class="currency-bar">
    <button class="active" onclick="updateCurr(1, 'SDG', this)">Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©</button>
    <button onclick="updateCurr(0.0022, 'SAR', this)">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ğŸ‡¸ğŸ‡¦</button>
    <button onclick="updateCurr(0.082, 'EGP', this)">Ù…ØµØ± ğŸ‡ªğŸ‡¬</button>
    <button onclick="updateCurr(0.0021, 'QAR', this)">Ù‚Ø·Ø± ğŸ‡¶ğŸ‡¦</button>
    <button onclick="updateCurr(0.00022, 'OMR', this)">Ø¹Ù…Ø§Ù† ğŸ‡´ğŸ‡²</button>
</div>

<div id="products-container" class="products-grid">
    </div>

<div class="merchant-footer">
    <h3 style="color:var(--gold);">ğŸ‘‘ Ø§Ù†Ø¶Ù…ÙŠ ÙƒØªØ§Ø¬Ø± ÙÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</h3>
    <p style="font-size: 13px; color: #888;">ÙØ¹Ù„ÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ Ø§Ù„Ø¢Ù†</p>
    <div class="bank-info">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø¨Ù†ÙƒÙƒ): 2280384</div>
    <a href="https://wa.me/249967584275" style="color:var(--gold); text-decoration:none; font-weight:bold;">Ø£Ø±Ø³Ù„ÙŠ Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ğŸ“±</a>
</div>

<div class="cart-float" onclick="sendToWhatsApp()">
    ğŸ›’ <span class="count" id="cartCount">0</span>
</div>

<script>
    let cart = [];
    let rate = 1;
    let symbol = 'SDG';

    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/1UZnlp45dVMRJxNibcg3fm52H6S4DB4YbGLr4KK3jPqs/gviz/tq?tqx=out:json';

    async function loadProducts() {
        try {
            const res = await fetch(SHEET_URL);
            const text = await res.text();
            const json = JSON.parse(text.substr(47).slice(0, -2));
            const rows = json.table.rows;
            
            let html = '';
            rows.forEach(row => {
                const name = row.c[0]?.v || 'Ù…Ù†ØªØ¬ ÙØ®Ù…';
                const p = row.c[1]?.v || 0;
                const img = row.c[3]?.v || '';
                
                html += `
                    <div class="product-card">
                        <img src="${img}" alt="${name}">
                        <div class="details">
                            <div class="title">${name}</div>
                            <div class="price-box">${(p * rate).toLocaleString()} ${symbol}</div>
                            <div class="shipping">ğŸšš Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ¬Ø±</div>
                            <a href="javascript:void(0)" class="order-btn" onclick="addToCart('${name}', ${p})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</a>
                        </div>
                    </div>
                `;
            });
            document.getElementById('products-container').innerHTML = html;
        } catch(e) { console.log("Error loading"); }
    }

    function updateCurr(r, s, btn) {
        rate = r; symbol = s;
        document.querySelectorAll('.currency-bar button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadProducts();
    }

    function addToCart(n, p) {
        cart.push({n, p: (p*rate).toLocaleString() + " " + symbol});
        document.getElementById('cartCount').innerText = cart.length;
        alert("Ø£Ø¨Ø´Ø±ÙŠ! " + n + " ÙÙŠ Ø§Ù„Ø³Ù„Ø© âœ¨");
    }

    function sendToWhatsApp() {
        if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©!");
        let msg = "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† VIRA MALL ğŸ‘‘%0A%0A";
        cart.forEach((i, idx) => msg += `${idx+1}. ${i.n} - ${i.p}%0A`);
        window.location.href = `https://wa.me/249967584275?text=${msg}`;
    }

    window.onload = loadProducts;
</script>

</body>
</html>
