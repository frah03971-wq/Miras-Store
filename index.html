<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIRA MALL | The Masterpiece</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
        
        :root {
            --gold: #D4AF37;
            --black: #080808;
            --ai-glow: #00f2fe;
            --royal-gradient: linear-gradient(45deg, #080808, #1a1a1a);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background: #fdfdfd; color: var(--black); font-family: 'Cairo', sans-serif; margin: 0; overflow-x: hidden; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø°Ù‡Ø¨ÙŠ */
        .delivery-top {
            background: var(--gold); color: #000; padding: 12px;
            font-size: 12px; font-weight: 900; text-align: center;
            letter-spacing: 0.5px; box-shadow: 0 4px 10px rgba(212,175,55,0.3);
            position: relative; z-index: 3000;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ Ø§Ù„ÙØ®Ù… */
        .header {
            background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px); padding: 20px;
            position: sticky; top: 0; z-index: 2000;
            border-bottom: 0.5px solid rgba(0,0,0,0.05);
            display: flex; flex-direction: column; align-items: center;
        }
        .logo { font-size: 2.2em; font-weight: 900; letter-spacing: -2px; text-decoration: none; color: var(--black); }
        .logo span { background: linear-gradient(to right, #D4AF37, #F1D592); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* Ø§Ù„Ø¨Ø­Ø« Ø¨Ù†Ø¨Ø¶ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ */
        .search-wrapper { position: relative; width: 100%; margin-top: 15px; }
        .search-ai {
            width: 100%; padding: 16px 50px; border-radius: 20px;
            border: none; background: #f2f2f7; font-family: 'Cairo';
            font-size: 14px; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .search-ai:focus { background: #fff; box-shadow: 0 15px 30px rgba(0,0,0,0.08); transform: translateY(-3px); }
        .ai-glow { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 10px; height: 10px; background: var(--ai-glow); border-radius: 50%; box-shadow: 0 0 10px var(--ai-glow); animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }

        /* Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†Ø§Øª Ø§Ù„ØªØ­ÙØ© */
        .collection-section { padding: 30px 0; animation: reveal 1s ease-out; }
        @keyframes reveal { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .section-info { padding: 0 25px; margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between; }
        .section-info h2 { font-size: 24px; font-weight: 900; margin: 0; position: relative; }
        .section-info h2::after { content: ''; position: absolute; bottom: -5px; right: 0; width: 30px; height: 4px; background: var(--gold); border-radius: 10px; }

        .scroller { display: flex; overflow-x: auto; padding: 10px 20px; gap: 20px; scrollbar-width: none; }
        .scroller::-webkit-scrollbar { display: none; }

        /* ÙƒØ±Øª Ø§Ù„Ù…Ù†ØªØ¬ - Masterpiece Design */
        .card {
            min-width: 200px; background: #fff; border-radius: 35px; overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); transition: 0.5s; position: relative;
        }
        .card:hover { transform: translateY(-10px); }
        .img-container { width: 100%; height: 260px; overflow: hidden; position: relative; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s; }
        .card:hover img { transform: scale(1.1); }
        
        .card-body { padding: 20px; text-align: center; }
        .p-title { font-weight: 700; font-size: 15px; margin-bottom: 8px; }
        .p-price { font-weight: 900; font-size: 18px; color: var(--gold); }

        .add-btn {
            background: var(--black); color: #fff; border: none; width: 100%;
            padding: 15px; border-radius: 20px; font-weight: 900; margin-top: 15px;
            cursor: pointer; transition: 0.3s;
        }
        .add-btn:active { transform: scale(0.9); background: var(--gold); color: #000; }

        /* Ø§Ù„Ø¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ - Floating Glass */
        .bottom-nav {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 85%; background: rgba(8, 8, 8, 0.9); backdrop-filter: blur(15px);
            border-radius: 40px; display: flex; justify-content: space-around; padding: 18px;
            z-index: 4000; box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        .nav-item { color: #888; text-decoration: none; text-align: center; font-size: 11px; }
        .nav-item.active { color: var(--gold); }
        .nav-item b { display: block; font-size: 26px; margin-bottom: 4px; font-style: normal; }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø´Ø§Ù…Ù„ */
        .modal { display: none; position: fixed; inset: 0; background: #fff; z-index: 5000; overflow-y: auto; padding-top: 80px; }
        .close-modal { position: fixed; top: 25px; left: 25px; background: var(--black); color: #fff; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 6000; }
    </style>
</head>
<body>

<div class="delivery-top">ğŸšš Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…ØªÙˆÙØ± Ù„ÙƒÙ„ ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ø³ÙˆØ¯Ø§Ù† â€¢ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</div>

<header class="header">
    <a href="#" class="logo">VIRA<span> MALL</span></a>
    <div class="search-wrapper">
        <div class="ai-glow"></div>
        <input type="text" id="aiSearch" class="search-ai" placeholder="Ø§Ø¨Ø­Ø«ÙŠ Ø¨Ø°ÙƒØ§Ø¡: 'ÙØ³Ø§ØªÙŠÙ† Ø³Ù‡Ø±Ø©'..." oninput="smartAI()">
    </div>
</header>

<main id="content">
    </main>

<div id="shop-modal" class="modal">
    <div class="close-modal" onclick="closeModal()">âœ•</div>
    <div id="modalContent"></div>
</div>

<nav class="bottom-nav">
    <div class="nav-item active" onclick="closeModal()"><b>ğŸ </b>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="nav-item" onclick="openCart()"><b>ğŸ›ï¸</b>Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© <span id="cartCount" style="color:var(--gold)"></span></div>
    <a href="https://wa.me/249967584275" class="nav-item" style="color:inherit; text-decoration:none;"><b>ğŸ’¬</b>ØªÙˆØ§ØµÙ„</a>
</nav>

<script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTWD0ZQAKe2KRwLQnNjh2t7Z2Y_BKXxaKZxZwKSXUaZLQ3eeLB1fwj6vNllpNwXCtd9aY9Q_tuuFXXV/pub?output=csv';
    let products = [], cart = [];

    async function loadMasterpiece() {
        const r = await fetch(sheetUrl + '&t=' + Date.now());
        const text = await r.text();
        const rows = text.split('\n').slice(1);
        products = rows.map(row => {
            const c = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
            return { name: c[0]?.replace(/"/g,''), price: c[1], shop: c[2], img: c[3] };
        }).filter(p => p.shop);
        
        const shops = [...new Set(products.map(p => p.shop))];
        let html = '';
        shops.forEach(s => {
            const items = products.filter(p => p.shop === s);
            html += `
                <section class="collection-section">
                    <div class="section-info"><h2>${s}</h2><span onclick="openShop('${s}')" style="color:var(--gold); font-weight:700;">ÙƒÙ„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© â¯</span></div>
                    <div class="scroller">
                        ${items.map(p => `
                            <div class="card" onclick="openShop('${s}')">
                                <div class="img-container"><img src="${p.img.split(',')[0]}" loading="lazy"></div>
                                <div class="card-body">
                                    <div class="p-title">${p.name}</div>
                                    <div class="p-price">${p.price} SDG</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>`;
        });
        document.getElementById('content').innerHTML = html;
    }

    function smartAI() {
        const q = document.getElementById('aiSearch').value.toLowerCase();
        const f = products.filter(p => p.name.toLowerCase().includes(q) || p.shop.toLowerCase().includes(q));
        if(q.length > 2) {
            let resHTML = `<div style="padding:20px"><h2 style="text-align:center">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ âœ¨</h2><div style="display:grid; grid-template-columns:1fr 1fr; gap:20px">`;
            resHTML += f.map(p => genProductCard(p)).join('') + `</div></div>`;
            document.getElementById('modalContent').innerHTML = resHTML;
            document.getElementById('shop-modal').style.display = 'block';
        }
    }

    function openShop(s) {
        const f = products.filter(p => p.shop === s);
        let html = `<div style="padding:20px"><h2 style="text-align:center">${s}</h2><div style="display:grid; grid-template-columns:1fr 1fr; gap:20px">`;
        html += f.map(p => genProductCard(p)).join('') + `</div></div>`;
        document.getElementById('modalContent').innerHTML = html;
        document.getElementById('shop-modal').style.display = 'block';
    }

    function genProductCard(p) {
        return `
            <div class="card">
                <div class="img-container"><img src="${p.img.split(',')[0]}"></div>
                <div class="card-body">
                    <div class="p-title">${p.name}</div>
                    <div class="p-price">${p.price} SDG</div>
                    <button class="add-btn" onclick="addToCart('${p.name}', '${p.price}')">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            </div>`;
    }

    function addToCart(n, p) {
        cart.push({n, p});
        document.getElementById('cartCount').innerText = `(${cart.length})`;
        // ØªØ£Ø«ÙŠØ± Ø­Ø±ÙƒÙŠ Ø¨Ø³ÙŠØ·
        const btn = event.target;
        btn.innerText = "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ¨";
        setTimeout(() => btn.innerText = "Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©", 1000);
    }

    function openCart() {
        if(!cart.length) return alert("Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ© ÙŠØ§ Ø¨ÙŠØ¨!");
        let m = "Ø·Ù„Ø¨ Ù…Ù„ÙƒÙŠ Ù…Ù† VIRA MALL ğŸ‡¸ğŸ‡©:\n\n";
        cart.forEach((it, i) => m += `${i+1}. ${it.n} - ${it.p} SDG\n`);
        window.open(`https://wa.me/249967584275?text=${encodeURIComponent(m)}`);
        cart = []; document.getElementById('cartCount').innerText = '';
    }

    function closeModal() { document.getElementById('shop-modal').style.display = 'none'; }
    loadMasterpiece();
</script>
</body>
</html>
