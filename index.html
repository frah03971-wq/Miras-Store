<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIRA OMEGA | THE TERMINATOR</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Cinzel+Decorative:wght@700;900&family=Syncopate:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #e4b04a;
            --gold-dark: #8c6a2c;
            --bg: #000000;
            --card-bg: #0a0a0a;
            --text-main: #ffffff;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { 
            margin: 0; background: var(--bg); color: var(--text-main); 
            font-family: 'Cairo', sans-serif; overflow-x: hidden;
            background-image: radial-gradient(circle at 50% 50%, #111 0%, #000 100%);
        }

        /* --- Entrance Destruction --- */
        #gate {
            position: fixed; inset: 0; background: #000; z-index: 999999;
            display: flex; justify-content: center; align-items: center;
            transition: 1.2s cubic-bezier(0.9, 0, 0.1, 1);
        }
        .gate-logo {
            font-family: 'Cinzel Decorative'; font-size: 50px; color: var(--gold);
            letter-spacing: 10px; text-shadow: 0 0 30px var(--gold-dark);
            animation: zoom-out 2s forwards;
        }
        @keyframes zoom-out { 0% { transform: scale(5); opacity: 0; filter: blur(20px); } 100% { transform: scale(1); opacity: 1; filter: blur(0); } }

        /* --- Cyber Header --- */
        header {
            position: sticky; top: 0; z-index: 10000; padding: 25px;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(30px);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(228,176,74,0.1);
        }
        .brand { font-family: 'Syncopate'; font-size: 24px; letter-spacing: 5px; color: var(--gold); }

        /* --- Search Engine --- */
        .search-container { padding: 20px; }
        .omega-search {
            width: 100%; background: #111; border: 1px solid #222;
            padding: 20px; border-radius: 15px; color: #fff; font-family: 'Cairo';
            font-size: 16px; transition: 0.5s; text-align: center;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        .omega-search:focus { border-color: var(--gold); box-shadow: 0 0 30px rgba(228,176,74,0.1); }

        /* --- Product Section --- */
        .v-header { padding: 40px 25px 10px; font-weight: 900; font-size: 26px; color: var(--gold); display: flex; align-items: center; gap: 15px; }
        .v-header span { font-family: 'Cinzel Decorative'; opacity: 0.5; }

        .omega-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; padding: 20px; }
        @media (max-width: 500px) { .omega-grid { grid-template-columns: 1fr; } }

        /* --- The Omega Card --- */
        .o-card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden;
            position: relative; border: 1px solid #1a1a1a;
            transition: 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .o-card:hover { transform: scale(1.03); border-color: var(--gold); }

        .visuals { width: 100%; height: 420px; position: relative; overflow: hidden; }
        .scroll-track { display: flex; width: 100%; height: 100%; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; }
        .scroll-track::-webkit-scrollbar { display: none; }
        .scroll-track img { min-width: 100%; height: 100%; object-fit: cover; scroll-snap-align: start; }

        .price-badge {
            position: absolute; bottom: 20px; right: 0; background: var(--gold);
            color: #000; padding: 8px 20px; font-weight: 900; font-size: 14px;
            clip-path: polygon(15% 0%, 100% 0%, 100% 100%, 0% 100%);
        }

        .dots-group { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 5px; }
        .o-dot { width: 5px; height: 5px; background: rgba(255,255,255,0.3); border-radius: 50%; transition: 0.3s; }
        .o-dot.active { background: var(--gold); width: 20px; border-radius: 10px; }

        .o-content { padding: 25px; text-align: center; border-top: 1px solid #1a1a1a; }
        .o-store { font-size: 10px; letter-spacing: 3px; color: var(--gold-dark); text-transform: uppercase; margin-bottom: 10px; display: block; }
        .o-title { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #fff; height: 50px; overflow: hidden; }

        .o-btn {
            background: none; border: 1px solid var(--gold); color: var(--gold);
            width: 100%; padding: 15px; border-radius: 10px; font-weight: 900;
            cursor: pointer; transition: 0.4s; position: relative; overflow: hidden;
        }
        .o-btn:active { background: var(--gold); color: #000; }

        /* --- Zoom Overlay --- */
        #omega-zoom {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98);
            z-index: 1000000; justify-content: center; align-items: center;
        }
        #omega-zoom img { max-width: 95%; max-height: 80%; border: 1px solid var(--gold); }

        /* --- Floating Navigation --- */
        nav {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 450px; background: rgba(10,10,10,0.8);
            backdrop-filter: blur(20px); border-radius: 20px; display: flex;
            justify-content: space-around; padding: 15px; border: 1px solid #222;
            z-index: 50000;
        }
        .nav-icon { font-size: 22px; color: #444; transition: 0.3s; cursor: pointer; position: relative; }
        .nav-icon.active { color: var(--gold); }
        .cart-tag { position: absolute; top: -10px; right: -10px; background: var(--gold); color: #000; font-size: 10px; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: 900; }

        /* --- Full Cart --- */
        #cart { display: none; position: fixed; inset: 0; background: #000; z-index: 200000; padding: 40px 20px; }
        .cart-ui { max-width: 500px; margin: 0 auto; }
        .cart-item { display: flex; justify-content: space-between; padding: 20px 0; border-bottom: 1px solid #111; }
    </style>
</head>
<body>

<div id="gate"><div class="gate-logo">VIRA</div></div>

<header>
    <div style="font-size:20px;">üõ°Ô∏è</div>
    <div class="brand">VIRA OMEGA</div>
    <div onclick="toggleCart()">üõí</div>
</header>

<div class="search-container">
    <input type="text" class="omega-search" id="oSearch" placeholder="ÿßÿ®ÿ≠ÿ´Ÿä ŸÅŸä ÿ™ÿ±ÿ≥ÿßŸÜÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™..." oninput="omegaFilter()">
</div>

<div class="v-header"><span>01</span> VIRA PRIV√â</div>
<div id="viraGrid" class="omega-grid"></div>

<div class="v-header"><span>02</span> ALLIANCE STORES</div>
<div id="partnerGrid" class="omega-grid"></div>

<div id="omega-zoom" onclick="this.style.display='none'"><img id="zImg"></div>

<div id="cart">
    <div class="cart-ui">
        <h1 style="font-family:'Cinzel Decorative'; color:var(--gold); text-align:center;">THE BAG</h1>
        <div id="cartList"></div>
        <div style="text-align:center; margin-top:50px;">
            <p style="color:#444; letter-spacing:5px;">TOTAL AMOUNT</p>
            <h1 id="totalPrice" style="font-size:50px; color:#fff;">0</h1>
            <button class="o-btn" style="background:var(--gold); color:#000; padding:20px;" onclick="checkout()">ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿπŸÖŸÑŸäÿ© (Ÿàÿßÿ™ÿ≥ÿßÿ®) ‚ö°</button>
            <p onclick="toggleCart()" style="margin-top:20px; color:#666;">ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ≠ŸÇŸäÿ®ÿ©</p>
        </div>
    </div>
</div>

<nav>
    <div class="nav-icon" onclick="location.reload()">üè†</div>
    <div class="nav-icon active" onclick="toggleCart()">üíº<span class="cart-tag" id="cartCount">0</span></div>
    <div class="nav-icon" onclick="alert('VIRA OMEGA SYSTEM: 249967584275')">‚öôÔ∏è</div>
</nav>

<script>
    const S_ID = '1UZnlp45dVMRJxNibcg3fm52H6S4DB4YbGLr4KK3jPqs';
    let database = [];
    let bag = [];

    async function loadOmega() {
        try {
            const [vR, pR] = await Promise.all([
                fetch(`https://docs.google.com/spreadsheets/d/${S_ID}/export?format=csv&gid=0`),
                fetch(`https://docs.google.com/spreadsheets/d/${S_ID}/export?format=csv&gid=1152504859`)
            ]);
            
            const parse = (txt, isV) => txt.split('\n').slice(1).map(r => {
                const c = r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(x => x?.replace(/"/g,'').trim());
                return isV ? { store: 'VIRA', name: c[0], price: c[1], img: c[3] } 
                           : { store: c[1], name: c[3], price: c[4], img: c[5] };
            }).filter(i => i.name && i.img);

            database = [...parse(await vR.text(), true), ...parse(await pR.text(), false).reverse()];
            render(database);
            
            setTimeout(() => { document.getElementById('gate').style.opacity = '0'; setTimeout(()=>document.getElementById('gate').remove(), 1200); }, 1500);
        } catch (e) { console.error("Omega Offline"); }
    }

    function render(data) {
        let hV = '', hP = '';
        data.forEach((p, idx) => {
            const imgs = p.img.split(/[,\s\n]+/).filter(l => l.includes('http'));
            const dots = imgs.length > 1 ? `<div class="dots-group" id="dots-${idx}">${imgs.map((_,i)=>`<div class="o-dot ${i===0?'active':''}"></div>`).join('')}</div>` : '';

            const ui = `
                <div class="o-card">
                    <div class="visuals">
                        <div class="scroll-track" onscroll="syncDots(this, ${idx})">
                            ${imgs.map(l => `<img src="${l}" onclick="zoom('${l}')" loading="lazy">`).join('')}
                        </div>
                        <div class="price-badge">${p.price}</div>
                        ${dots}
                    </div>
                    <div class="o-content">
                        <span class="o-store">${p.store}</span>
                        <div class="o-title">${p.name}</div>
                        <button class="o-btn" onclick="addToBag('${p.name.replace(/'/g,"")}')">ADD TO DESTINY</button>
                    </div>
                </div>`;
            if(p.store === 'VIRA') hV += ui; else hP += ui;
        });
        document.getElementById('viraGrid').innerHTML = hV;
        document.getElementById('partnerGrid').innerHTML = hP;
    }

    function syncDots(el, idx) {
        const i = Math.round(el.scrollLeft / el.offsetWidth);
        const dots = document.querySelectorAll(`#dots-${idx} .o-dot`);
        dots.forEach((d, n) => d.classList.toggle('active', n === Math.abs(i)));
    }

    function zoom(l) { document.getElementById('zImg').src = l; document.getElementById('omega-zoom').style.display = 'flex'; }

    function omegaFilter() {
        const q = document.getElementById('oSearch').value.toLowerCase();
        render(database.filter(p => p.name.toLowerCase().includes(q) || p.store.toLowerCase().includes(q)));
    }

    function addToBag(n) {
        bag.push(database.find(x => x.name.replace(/'/g,"") === n));
        document.getElementById('cartCount').innerText = bag.length;
        const btn = event.target; btn.innerText = 'SECURED ‚úì';
        setTimeout(() => btn.innerText = 'ADD TO DESTINY', 1000);
    }

    function toggleCart() {
        const c = document.getElementById('cart');
        c.style.display = (c.style.display === 'block') ? 'none' : 'block';
        if(c.style.display === 'block') {
            document.getElementById('cartList').innerHTML = bag.map((i, idx) => `
                <div class="cart-item">
                    <div><b>${i.name}</b><br><small style="color:var(--gold)">${i.store}</small></div>
                    <div>${i.price} <span style="color:red; margin-left:10px" onclick="removeFromBag(${idx})">√ó</span></div>
                </div>`).join('');
            const total = bag.reduce((a, c) => a + (parseInt(c.price.toString().replace(/[^0-9]/g,'')) || 0), 0);
            document.getElementById('totalPrice').innerText = total.toLocaleString() + ' SDG';
        }
    }

    function removeFromBag(idx) {
        bag.splice(idx, 1);
        document.getElementById('cartCount').innerText = bag.length;
        toggleCart(); toggleCart();
    }

    function checkout() {
        const msg = encodeURIComponent(`OMEGA ORDER ‚ö°\n\n${bag.map(i => `‚Ä¢ ${i.name} [${i.store}]`).join('\n')}\n\nTOTAL: ${document.getElementById('totalPrice').innerText}`);
        window.open(`https://wa.me/249967584275?text=${msg}`);
    }

    loadOmega();
</script>
</body>
</html>
