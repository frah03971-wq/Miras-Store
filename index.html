<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIRAS MALL - Ù…ÙˆÙ„ Ù…ÙŠØ±Ø§Ø³ Ø§Ù„ÙØ§Ø®Ø±</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Playfair+Display:wght@700&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #000; margin: 0; padding: 0; color: #fff; overflow-x: hidden; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ„ (Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) */
        #welcome-screen { min-height: 100vh; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; }
        .mall-title { color: #d4af37; font-size: 3.2em; margin-bottom: 5px; font-family: 'Playfair Display', serif; text-shadow: 0 0 15px rgba(212,175,55,0.4); }
        .mall-subtitle { color: #888; margin-bottom: 40px; letter-spacing: 5px; font-size: 0.8em; text-transform: uppercase; }
        
        .store-selector { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 900px; width: 100%; }
        
        .store-card { height: 220px; position: relative; border: 1px solid #222; cursor: pointer; overflow: hidden; transition: 0.5s; }
        .store-card:hover { border-color: #d4af37; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(212,175,55,0.2); }
        .store-card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.4; transition: 0.5s; }
        .store-card:hover img { opacity: 0.7; transform: scale(1.1); }
        .store-card h2 { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; margin: 0; color: #d4af37; font-size: 1.6em; text-shadow: 2px 2px 4px #000; font-weight: bold; }

        /* Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ */
        #main-store { display: none; }
        .ticker { background: #d4af37; color: #000; padding: 12px 0; overflow: hidden; position: sticky; top: 0; z-index: 1000; font-weight: bold; }
        .ticker-wrap { display: inline-block; white-space: nowrap; animation: ticker 25s linear infinite; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        header { background: #111; color: #d4af37; padding: 40px; border-bottom: 2px solid #d4af37; text-align: center; }
        .back-btn { background: transparent; color: #d4af37; border: 1px solid #d4af37; padding: 10px 25px; cursor: pointer; margin: 20px; font-weight: bold; transition: 0.3s; }
        .back-btn:hover { background: #d4af37; color: #000; }

        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .product-card { background: #0a0a0a; border: 1px solid #1a1a1a; overflow: hidden; transition: 0.3s; position: relative; }
        .product-card:hover { border-color: #d4af37; }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù„Ø¨ÙˆÙ… */
        .img-container { position: relative; width: 100%; height: 380px; overflow: hidden; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .album-badge { position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.7); color: #d4af37; padding: 5px 12px; border-radius: 20px; font-size: 0.8em; border: 1px solid #d4af37; z-index: 10; }

        .card-content { padding: 20px; text-align: right; }
        .price { color: #d4af37; font-weight: bold; font-size: 1.6em; display: block; margin: 10px 0; }
        .btn-whatsapp { display: block; background: #25d366; color: #fff; padding: 15px; text-decoration: none; font-weight: bold; text-align: center; border-radius: 2px; transition: 0.3s; }
        .btn-whatsapp:hover { background: #1da851; transform: scale(1.02); }

        @media (max-width: 600px) {
            .store-selector { grid-template-columns: 1fr; }
            .mall-title { font-size: 2.5em; }
            .store-card { height: 180px; }
        }
    </style>
</head>
<body>

<div id="welcome-screen">
    <h1 class="mall-title">MIRAS MALL</h1>
    <p class="mall-subtitle">THE ART OF LUXURY</p>
    <div class="store-selector">
        <div class="store-card" onclick="openStore('VIRA Boutique')">
            <img src="https://i.ibb.co/RpzYpBQ1/Screenshot-com-zzkko-Goods-Detail-Activity-edit-357786989274816.jpg" alt="Ø´Ù†Ø·">
            <h2>VIRA BAGS</h2>
        </div>
        <div class="store-card" onclick="openStore('Ù…ÙŠØ±Ø§Ø³ Ù„Ù„ÙØ³Ø§ØªÙŠÙ†')">
            <img src="https://via.placeholder.com/400x600/111/d4af37?text=DRESSES" alt="ÙØ³Ø§ØªÙŠÙ†">
            <h2>Ø§Ù„ÙØ³Ø§ØªÙŠÙ†</h2>
        </div>
        <div class="store-card" onclick="openStore('Ù…ÙŠØ±Ø§Ø³ Ù„Ù„Ø¬Ø²Ù…')">
            <img src="https://via.placeholder.com/400x600/111/d4af37?text=SHOES" alt="Ø¬Ø²Ù…">
            <h2>Ø§Ù„Ø¬Ø²Ù…</h2>
        </div>
        <div class="store-card" onclick="openStore('Ù…ÙŠØ±Ø§Ø³ Ù„Ù„Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª')">
            <img src="https://via.placeholder.com/400x600/111/d4af37?text=ACCESSORIES" alt="Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª">
            <h2>Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</h2>
        </div>
        <div class="store-card" onclick="openStore('Ù…ÙŠØ±Ø§Ø³ Ù„Ù„Ø¹Ù†Ø§ÙŠØ©')">
            <img src="https://via.placeholder.com/400x600/111/d4af37?text=SKIN+CARE" alt="Ø¹Ù†Ø§ÙŠØ©">
            <h2>Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø©</h2>
        </div>
        <div class="store-card" onclick="openStore('Ù…ÙŠØ±Ø§Ø³ Ù„Ù„Ø¶ÙŠØ§ÙØ©')">
            <img src="https://via.placeholder.com/400x600/111/d4af37?text=GIFTS" alt="Ù‡Ø¯Ø§ÙŠØ§">
            <h2>Ø¨ÙˆÙƒØ³Ø§Øª Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§</h2>
        </div>
    </div>
</div>

<div id="main-store">
    <div class="ticker">
        <div id="ticker-text" class="ticker-wrap">âœ¨ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© ÙÙŠ Ù…ÙˆÙ„ Ù…ÙŠØ±Ø§Ø³ Ø§Ù„ÙØ§Ø®Ø± âœ¨</div>
    </div>
    <button class="back-btn" onclick="location.reload()">â¬… Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</button>
    <header><h1 id="store-name" style="font-family: 'Playfair Display', serif; letter-spacing: 3px;"></h1></header>
    <div class="products-grid" id="products-container"></div>
</div>

<script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTWD0ZQAKe2KRwLQnNjh2t7Z2Y_BKXxaKZxZwKSXUaZLQ3eeLB1fwj6vNllpNwXCtd9aY9Q_tuuFXXV/pub?output=csv';
    let allProducts = [];

    async function loadData() {
        try {
            const response = await fetch(sheetUrl + '&t=' + Date.now());
            const text = await response.text();
            const rows = text.split('\n').filter(r => r.trim() !== '');
            allProducts = rows.slice(1).map(row => {
                const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                return {
                    name: cols[0]?.replace(/"/g, '').trim(),
                    price: cols[1]?.replace(/"/g, '').trim(),
                    shop: cols[2]?.replace(/"/g, '').trim(),
                    img: cols[3]?.replace(/"/g, '').trim(),
                    phone: cols[4]?.replace(/"/g, '').trim() || '249967584275',
                    desc: cols[5]?.replace(/"/g, '').trim() || ''
                };
            });
        } catch (e) { console.error("Data error"); }
    }

    function openStore(shopName) {
        document.getElementById('welcome-screen').style.display = 'none';
        document.getElementById('main-store').style.display = 'block';
        document.getElementById('store-name').innerText = shopName;
        
        const filtered = allProducts.filter(p => p.shop === shopName);
        displayProducts(filtered);
        window.scrollTo(0,0);
    }

    function displayProducts(products) {
        const container = document.getElementById('products-container');
        container.innerHTML = products.length ? '' : '<h2 style="grid-column: 1/-1; text-align:center; margin-top:50px;">Ù‚Ø±ÙŠØ¨Ø§Ù‹.. Ù†Ø¬Ù‡Ø² Ù„ÙƒÙ Ø£Ø±Ù‚Ù‰ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª âœ¨</h2>';
        
        products.forEach(p => {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ù„Ø¨ÙˆÙ… (ÙØµÙ„ Ø§Ù„ØµÙˆØ± Ø¨Ø§Ù„ÙØ§ØµÙ„Ø©)
            const images = p.img.split(',');
            let imageSection = '';
            
            if (images.length > 1) {
                imageSection = `
                    <div class="img-container">
                        <span class="album-badge">ğŸ“¸ ${images.length} ØµÙˆØ±</span>
                        <img src="${images[0].trim()}" alt="${p.name}">
                    </div>`;
            } else {
                imageSection = `
                    <div class="img-container">
                        <img src="${p.img}" onerror="this.src='https://via.placeholder.com/400x500/111/d4af37?text=MIRAS+COLLECTION'">
                    </div>`;
            }

            container.innerHTML += `
                <div class="product-card">
                    ${imageSection}
                    <div class="card-content">
                        <h3 style="margin:0; font-size:1.2em;">${p.name}</h3>
                        <span class="price">${p.price} SDG</span>
                        <p style="color:#aaa; font-size:0.85em; margin-bottom:15px; line-height:1.5;">${p.desc}</p>
                        <a href="https://wa.me/${p.phone}?text=Ø·Ù„Ø¨ Ù…Ù† Ù‚Ø³Ù… ${p.shop}: ${p.name}" class="btn-whatsapp">Ø§Ø·Ù„Ø¨ÙŠ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
                    </div>
                </div>`;
        });
    }

    window.onload = loadData;
</script>
</body>
</html>
