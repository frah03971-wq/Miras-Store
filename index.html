<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ù…ÙŠØ±Ø§Ø³ - Miras Mall</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #000; margin: 0; padding: 0; text-align: center; color: #fff; }
        
        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØ­Ø±Ùƒ Ø¨Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ */
        .ticker { background: #d4af37; color: #000; padding: 12px 0; overflow: hidden; position: sticky; top: 0; z-index: 1000; font-weight: bold; font-size: 1.1em; border-bottom: 2px solid #fff; }
        .ticker-wrap { display: inline-block; white-space: nowrap; animation: ticker 25s linear infinite; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        header { background: linear-gradient(135deg, #1a1a1a 0%, #000 100%); color: #d4af37; padding: 40px 20px; border-radius: 0 0 30px 30px; border: 1px solid #d4af37; margin-bottom: 30px; }
        .filter-container { margin-bottom: 30px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 0 10px; }
        .filter-btn { background: #1a1a1a; color: #d4af37; border: 1px solid #d4af37; padding: 10px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .filter-btn.active, .filter-btn:hover { background: #d4af37; color: #000; transform: scale(1.05); }
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .product-card { background: #111; padding: 20px; border-radius: 30px; border: 1px solid #222; transition: 0.3s; display: flex; flex-direction: column; }
        .product-card img { width: 100%; height: 300px; object-fit: cover; border-radius: 20px; background: #222; }
        .shop-tag { font-size: 0.8em; color: #d4af37; background: rgba(212, 175, 55, 0.1); padding: 5px 15px; border-radius: 50px; display: inline-block; margin-bottom: 15px; border: 0.5px solid #d4af37; align-self: center; }
        .price { color: #d4af37; font-weight: 700; font-size: 1.5em; margin: 10px 0; }
        .description { font-size: 0.95em; color: #bbb; margin-bottom: 20px; line-height: 1.6; }
        .btn-whatsapp { display: block; background: #25d366; color: white; padding: 14px; text-decoration: none; border-radius: 15px; font-weight: bold; margin-top: auto; }
    </style>
</head>
<body>

<div class="ticker">
    <div class="ticker-wrap">âœ¨ Ø¹Ø±Ø¶ Ø®Ø§Øµ Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø´Ù‡Ø± Ø§Ù„Ø§ÙØªØªØ§Ø­: ØªØ®ÙÙŠØ¶Ø§Øª ÙƒØ¨Ø±Ù‰ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ ØªØ´ÙƒÙŠÙ„Ø§Øª Ø§Ù„Ø´Ù†Ø· Ø§Ù„ÙØ§Ø®Ø±Ø© ÙÙŠ Ù‚Ø³Ù… "Miras Boutique" .. Ù„Ø§ ØªÙÙˆØªÙŠ Ø§Ù„ÙØ±ØµØ© âœ¨</div>
</div>

<header>
    <h1>âœ¨ Ù…Ù†ØµØ© Ù…ÙŠØ±Ø§Ø³ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© âœ¨</h1>
    <p>Ø¨ÙˆØ§Ø¨ØªÙƒ Ù„Ù„Ø£Ù†Ø§Ù‚Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ</p>
</header>

<div class="filter-container" id="filter-buttons">
    <button class="filter-btn active" onclick="filterShop('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</button>
</div>

<div class="products-grid" id="products-container">
    <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„ÙˆØµÙ...</p>
</div>

<script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTWD0ZQAKe2KRwLQnNjh2t7Z2Y_BKXxaKZxZwKSXUaZLQ3eeLB1fwj6vNllpNwXCtd9aY9Q_tuuFXXV/pub?output=csv'; 
    let allProducts = [];

    async function loadData() {
        try {
            const response = await fetch(sheetUrl + '&t=' + Date.now());
            const text = await response.text();
            const rows = text.split('\n').filter(r => r.trim() !== '');
            
            allProducts = [];
            const shops = new Set();

            for (let i = 1; i < rows.length; i++) {
                const cols = rows[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if (cols.length >= 4) {
                    const product = {
                        name: cols[0].replace(/"/g, '').trim(),
                        price: cols[1].replace(/"/g, '').trim(),
                        shop: cols[2] ? cols[2].replace(/"/g, '').trim() : 'Ø¹Ø§Ù…',
                        img: cols[3] ? cols[3].replace(/"/g, '').trim() : '',
                        phone: cols[4] ? cols[4].replace(/"/g, '').trim() : '249967584275',
                        desc: cols[5] ? cols[5].replace(/"/g, '').trim() : ''
                    };
                    allProducts.push(product);
                    if(product.shop && product.shop !== 'Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±') shops.add(product.shop);
                }
            }

            const filterBox = document.getElementById('filter-buttons');
            shops.forEach(shop => {
                filterBox.innerHTML += `<button class="filter-btn" onclick="filterShop('${shop}')">${shop}</button>`;
            });

            displayProducts(allProducts);
        } catch (e) {
            document.getElementById('products-container').innerHTML = "<h2>ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙŠØ§ Ù‚Ù„Ø¨ÙŠ</h2>";
        }
    }

    function displayProducts(products) {
        const container = document.getElementById('products-container');
        container.innerHTML = '';
        products.forEach(p => {
            container.innerHTML += `
                <div class="product-card">
                    <span class="shop-tag">ğŸ¬ ${p.shop}</span>
                    <img src="${p.img}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/300/111/d4af37?text=Miras+Mall'">
                    <h3 style="margin:15px 0 5px 0; color:#d4af37;">${p.name}</h3>
                    <span class="price">${p.price} SDG</span>
                    <p class="description">${p.desc}</p>
                    <a href="https://wa.me/${p.phone}?text=Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨: ${p.name}" class="btn-whatsapp">Ø§Ø·Ù„Ø¨ÙŠ Ø§Ù„Ø¢Ù†</a>
                </div>`;
        });
    }

    function filterShop(shopName) {
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.toggle('active', btn.innerText === shopName);
        });
        if (shopName === 'Ø§Ù„ÙƒÙ„') { displayProducts(allProducts); } 
        else { displayProducts(allProducts.filter(p => p.shop === shopName)); }
    }

    window.onload = loadData;
</script>
</body>
</html>
