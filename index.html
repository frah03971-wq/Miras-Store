<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIRA MALL | ÙÙŠØ±Ø§ Ù…ÙˆÙ„</title>
<style>
:root{
  --gold:#D4AF37;
  --dark:#0f1111;
  --gray:#f5f5f7;
  --white:#ffffff;
}
body{margin:0;font-family:'Segoe UI', Arial, sans-serif;background:var(--gray);direction:rtl;}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
header{background:var(--dark);color:white;padding:20px 15px;text-align:center;position:relative;}
header h1{margin:0;font-size:28px;color:var(--gold);letter-spacing:1px;}
header p.slogan{margin:8px 0 0;font-size:14px;color:var(--white);opacity:0.9;}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
.menu-btn {
  position: absolute; top: 20px; right: 20px;
  font-size: 24px; color: var(--gold); cursor: pointer;
}
.sidebar {
  height: 100%; width: 0; position: fixed; z-index: 10000;
  top: 0; right: 0; background-color: var(--dark);
  overflow-x: hidden; transition: 0.4s; padding-top: 60px;
  box-shadow: -5px 0 15px rgba(0,0,0,0.5);
}
.sidebar a, .sidebar p {
  padding: 15px 25px; text-decoration: none; font-size: 16px;
  color: white; display: block; transition: 0.3s;
}
.sidebar .closebtn {
  position: absolute; top: 10px; left: 25px; font-size: 36px; color: var(--gold);
}
.sidebar-header { color: var(--gold); font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 10px; }

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª */
.container{padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(165px,1fr));gap:15px;max-width:1100px;margin:0 auto;}

/* Ø§Ù„ÙƒØ±ÙˆØª */
.card{background:var(--white);border-radius:18px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.05);transition:.3s;border:1px solid #eee;display:flex;flex-direction:column;}
.card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,0.1);}
.card img{width:100%;height:190px;object-fit:cover;cursor:pointer;background:#fafafa;}

.card .info{padding:12px;text-align:center;flex-grow:1;}
.store{font-size:10px;color:var(--gold);font-weight:bold;margin-bottom:4px;text-transform:uppercase;}
.title{font-size:14px;font-weight:bold;margin:5px 0;color:var(--dark);height:38px;overflow:hidden;}
.price{font-size:16px;font-weight:bold;color:#1a1a1a;margin:8px 0;}
.status{font-size:11px;margin-bottom:10px;color:#28a745;font-weight:bold;}

.btn{
  background:var(--dark);color:var(--gold);border:1px solid var(--gold);
  width:100%;padding:10px;border-radius:10px;cursor:pointer;font-weight:bold;
  transition:0.3s;
}
.btn:hover{background:var(--gold);color:var(--dark);}

/* ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø© */
#viewer{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:99999;align-items:center;justify-content:center;}
#viewer img{max-width:95%;max-height:85%;border-radius:10px;}
</style>
</head>
<body>

<header>
  <div class="menu-btn" onclick="openNav()">â˜°</div>
  <h1>VIRA MALL</h1>
  <p class="slogan">Ø®ÙŠØ§Ø±Ùƒ Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©</p>
</header>

<div id="mySidebar" class="sidebar">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Ã—</a>
  <p class="sidebar-header">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹</p>
  <p>Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ§Ø¬Ø±Ø§Øª: <br><strong style="color:var(--gold); font-size:20px;">2280384</strong></p>
  <hr style="border:0.5px solid #333; width:80%">
  <p class="sidebar-header">Ø§Ù„ØªÙˆØµÙŠÙ„</p>
  <p>ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¹Ù„Ù‰ Ø­Ø³Ø¨ Ø³ÙŠØ§Ø³Ø© ÙƒÙ„ Ù…ØªØ¬Ø±.</p>
</div>

<div class="container" id="grid">
  <p style="text-align:center; color:#888; grid-column: 1/-1;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø£ÙØ®Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
</div>

<div id="viewer" onclick="this.style.display='none'">
  <img id="viewerImg">
</div>

<script>
const SHEET_URL='https://docs.google.com/spreadsheets/d/e/2PACX-1vTWD0ZQAKe2KRwLQnNjh2t7Z2Y_BKXxaKZxZwKSXUaZLQ3eeLB1fwj6vNllpNwXCtd9aY9Q_tuuFXXV/pub?gid=0&single=true&output=csv';

// Ø¯ÙˆØ§Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
function openNav() { document.getElementById("mySidebar").style.width = "250px"; }
function closeNav() { document.getElementById("mySidebar").style.width = "0"; }

async function loadProducts(){
  try {
    const res = await fetch(SHEET_URL);
    const text = await res.text();
    const rows = text.split(/\r?\n/).slice(1);
    const products = rows.map(r=>{
      const c = r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(x=>x.replace(/"/g,'').trim());
      return {name:c[0],price:c[1],store:c[2],img:c[3],whatsapp:c[4],status:c[5]||"Ù…ØªÙˆÙØ±"};
    }).filter(p=>p.name && p.img && p.img.startsWith('http'));
    showProducts(products);
  } catch(e) {
    document.getElementById('grid').innerHTML="Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„.";
  }
}

function showProducts(list){
  const grid=document.getElementById('grid');
  if(list.length===0){grid.innerHTML="<p style='text-align:center;color:#888'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";return;}
  grid.innerHTML=list.map(p=>`
    <div class="card">
      <img src="${p.img}" alt="${p.name}" onclick="openImg('${p.img}')" onerror="this.src='https://via.placeholder.com/200?text=VIRA+MALL'">
      <div class="info">
        <div class="store">âœ¨ ${p.store}</div>
        <div class="title">${p.name}</div>
        <div class="price">${p.price} SDG</div>
        <div class="status">${p.status}</div>
        <button class="btn" onclick="order('${p.whatsapp}','${p.name}')">Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
      </div>
    </div>
  `).join('');
}

function openImg(src){
  document.getElementById('viewerImg').src=src;
  document.getElementById('viewer').style.display='flex';
}

function order(num,name){
  const cleanNum = num.replace('+', '').replace(/\s/g, '');
  window.open(`https://wa.me/${cleanNum}?text=${encodeURIComponent('Ø³Ù„Ø§Ù…Ø§Øª ÙÙŠØ±Ø§ Ù…ÙˆÙ„ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨: '+name)}`,'_blank');
}

loadProducts();
</script>

</body>
</html>
