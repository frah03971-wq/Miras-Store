<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MERAS - VIRA COLLECTION</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Playfair+Display:wght@700&display=swap');
        
        :root { --gold: #c5a059; --bg: #f9f9f9; --white: #ffffff; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg); margin: 0; color: #333; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ - Ø²ÙŠ Ø§Ù„ØµÙˆØ±Ø© */
        header { background: #111; padding: 20px; text-align: center; position: relative; }
        .logo-main { width: 150px; filter: drop-shadow(0 0 5px rgba(197,160,89,0.5)); }
        .mall-name { color: var(--gold); font-family: 'Playfair Display', serif; font-size: 2.5em; margin: 10px 0 0; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø³Ù„Ø© Ø§Ù„Ø£Ø¨ÙŠØ¶ */
        .nav-bar { 
            background: var(--white); 
            padding: 15px 20px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .search-box { flex: 1; max-width: 400px; position: relative; margin: 0 15px; }
        .search-box input { width: 100%; padding: 10px 15px; border: 1px solid #ddd; border-radius: 5px; background: #f5f5f5; outline: none; }
        
        .cart-btn { background: none; border: none; font-size: 1.5em; cursor: pointer; position: relative; color: #333; }
        .cart-count { position: absolute; top: -5px; right: -10px; background: var(--gold); color: #fff; font-size: 0.6em; padding: 2px 6px; border-radius: 50%; }

        /* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .section-title { border-bottom: 2px solid var(--gold); display: inline-block; padding-bottom: 5px; margin-bottom: 25px; font-weight: bold; color: #111; }
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .product-card { background: var(--white); border-radius: 8px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.3s; border: 1px solid #eee; }
        .product-card:hover { transform: translateY(-5px); }
        
        .img-wrapper { width: 100%; background: #fdfdfd; position: relative; }
        .img-wrapper img { width: 100%; height: auto; display: block; }
        
        .card-info { padding: 20px; text-align: center; }
        .card-info h3 { margin: 0 0 10px; font-size: 1.1em; color: #222; }
        .p-price { color: var(--gold); font-weight: bold; font-size: 1.3em; display: block; margin-bottom: 15px; }
        
        .add-btn { background: #111; color: #fff; border: none; padding: 12px 20px; width: 100%; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .add-btn:hover { background: var(--gold); }

        /* ØµÙØ­Ø© Ø§Ù„Ø³Ù„Ø© */
        #cart-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center; }
        .cart-content { background: #fff; width: 90%; max-width: 500px; padding: 30px; border-radius: 10px; position: relative; }
        .close-cart { position: absolute; top: 15px; left: 15px; font-size: 1.5em; cursor: pointer; }

        @media (max-width: 600px) {
            .products-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
            .card-info { padding: 10px; }
            .card-info h3 { font-size: 0.9em; }
        }
    </style>
</head>
<body>

<header>
    <h1 class="mall-name">MERIAS</h1>
    <p style="color: #666; font-size: 0.8em; letter-spacing: 3px;">LUXURY ACCESSORIES</p>
</header>

<div class="nav-bar">
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø«ÙŠ ÙÙŠ ÙƒÙˆÙ„ÙŠÙƒØ´Ù† VIRA..." onkeyup="search()">
    </div>
    <button class="cart-btn" onclick="toggleCart()">
        ğŸ›’ <span class="cart-count" id="cartCount">0</span>
    </button>
</div>

<div class="container">
    <h2 class="section-title">PRODUCT VIRA MERAS</h2>
    <div class="products-grid" id="productsGrid">
        </div>
</div>

<div id="cart-modal">
    <div class="cart-content">
        <span class="close-cart" onclick="toggleCart()">Ã—</span>
        <h2 style="text-align:center; border-bottom: 1px solid #eee; padding-bottom: 10px;">Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
        <div id="cartItems"></div>
        <div style="margin-top:20px; font-size:1.2em; font-weight:bold; text-align:center;">
            Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="totalPrice">0</span> SDG
        </div>
        <button class="add-btn" style="margin-top:20px; background:#25d366;" onclick="sendOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
    </div>
</div>

<script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTWD0ZQAKe2KRwLQnNjh2t7Z2Y_BKXxaKZxZwKSXUaZLQ3eeLB1fwj6vNllpNwXCtd9aY9Q_tuuFXXV/pub?output=csv';
    let products = [], cart = [];

    async function init() {
        const resp = await fetch(sheetUrl + '&t=' + Date.now());
        const csv = await resp.text();
        const rows = csv.split('\n').slice(1);
        products = rows.map(r => {
            const c = r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
            return {
                name: c[0]?.replace(/"/g,''),
                price: parseFloat(c[1]) || 0,
                shop: c[2]?.replace(/"/g,'').trim(),
                img: c[3]?.replace(/"/g,''),
                phone: c[4]?.replace(/[^\d]/g,'') || '249967584275'
            };
        }).filter(p => p.shop === 'VIRA Boutique' || p.shop === 'VIRA'); // Ø¹Ø´Ø§Ù† ÙŠØ´ØªØºÙ„ Ù…Ø¹ vira Ø·ÙˆØ§Ù„ÙŠ
        render(products);
    }

    function render(data) {
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = data.map(p => {
            const firstImg = p.img.split(',')[0];
            return `
                <div class="product-card">
                    <div class="img-wrapper">
                        <img src="${firstImg}" alt="${p.name}">
                    </div>
                    <div class="card-info">
                        <h3>${p.name}</h3>
                        <span class="p-price">${p.price} SDG</span>
                        <button class="add-btn" onclick="addToCart('${p.name}', ${p.price}, '${p.phone}')">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                    </div>
                </div>
            `;
        }).join('');
    }

    function search() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        const filtered = products.filter(p => p.name.toLowerCase().includes(term));
        render(filtered);
    }

    function addToCart(name, price, phone) {
        cart.push({name, price, phone});
        updateCart();
        alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ…');
    }

    function updateCart() {
        document.getElementById('cartCount').innerText = cart.length;
        const list = document.getElementById('cartItems');
        let total = 0;
        list.innerHTML = cart.map((item, i) => {
            total += item.price;
            return `<div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>${item.name}</span>
                <span>${item.price} SDG <button onclick="remove(${i})" style="color:red; background:none; border:none;">âŒ</button></span>
            </div>`;
        }).join('');
        document.getElementById('totalPrice').innerText = total;
    }

    function remove(i) { cart.splice(i,1); updateCart(); }
    function toggleCart() { 
        const m = document.getElementById('cart-modal');
        m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
    }

    function sendOrder() {
        if(!cart.length) return;
        let msg = "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…ÙŠØ±Ø§Ø³ØŒ Ø·Ù„Ø¨ÙŠ Ù…Ù† ÙƒÙˆÙ„ÙŠÙƒØ´Ù† VIRA:\n";
        cart.forEach(item => msg += `- ${item.name} (${item.price} SDG)\n`);
        msg += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${document.getElementById('totalPrice').innerText} SDG`;
        window.open(`https://wa.me/${cart[0].phone}?text=${encodeURIComponent(msg)}`);
    }

    window.onload = init;
</script>
</body>
</html>
